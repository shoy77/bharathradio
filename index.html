<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bharath Radio</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" />
  <meta name="theme-color" content="#2196f3" />
  <style>
    body {
  font-family: 'Arial', sans-serif;
  margin: 0;
  padding: 0;
    
    }

    /* Splash screen styles */
    #splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      background: #000;
    }

    #splash img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* App content */
    #mainApp.visible {
  opacity: 1;
  transition: opacity 1.5s ease;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background-image: url("icons/splash-720x1280.png"); /* ✅ your image */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
      
    }


    .screen {
      background: 00;
      border-radius: 20px;
      width: 100%;
      height: 180px;
      padding: 5px;
      box-shadow: 00;
      text-align: center;
      margin-bottom: 30px;
    }

    .frequency {
      font-size: 35px;
      color: #fff;
      font-weight: bold;
    }

    .station {
      font-size: 14px;
      color: #fff;
      margin-top: 5px;
    }

    .indicator {
      margin-top: 8px;
      height: 10px;
      width: 10px;
      border-radius: 50%;
      background: Red;
      display: inline-block;
    }

    .indicator.on {
      background: limegreen;
      box-shadow: 0 0 10px lime;
    }

    #visualizer {
      margin-top: 12px;
      width: 100%;
      height: 70px;
      background: 00;
      border-radius: 8px;
    }

    .wheel {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: #222;
      border: 2px solid #FCBE6A;
      position: relative;
      box-shadow: inset 0 0 20px #000;
      margin-top: 225px;
    }

    .wheel button {
      position: absolute;
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
    }

    .top-btn { top: 10px; left: 50%; transform: translateX(-50%); }
    .bottom-btn { bottom: 10px; left: 50%; transform: translateX(-50%); }
    .left-btn { left: 10px; top: 50%; transform: translateY(-50%); }
    .right-btn { right: 10px; top: 50%; transform: translateY(-50%); }

    .center-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #555, #000);
      border: none;
      color: red;
      box-shadow:
        inset -3px -3px 6px rgba(255,255,255,0.2),
        inset 3px 3px 6px rgba(0,0,0,0.6),
        0 0 15px red;
      text-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .center-button.on {
      color: lime;
      box-shadow:
        inset -3px -3px 6px rgba(255,255,255,0.2),
        inset 3px 3px 6px rgba(0,0,0,0.6),
        0 0 20px lime;
      text-shadow: 0 0 6px limegreen;
    }

    .center-button:active {
      transform: translate(-50%, -50%) scale(0.95);
    }

    .center-button svg {
      width: 32px;
      height: 32px;
      stroke-width: 2;
      stroke: currentColor;
      fill: none;
    }
  </style>
</head>
<body>
  <!-- Splash screen -->

<div id="splash" style="
  background-image: url('icons/splash-720x1280.png');
  background-size: cover;
  background-position: center;
  width: 100vw;
  height: 100vh;
">
</div>
  

  <!-- Main App -->
  <div id="mainApp">
    <div class="ipod">
      <div class="screen">
        <div class="frequency" id="frequency">--.- MHz</div>
        <div class="station" id="stationName">OFF</div>
        <div class="indicator" id="indicator"></div>
        <canvas id="visualizer" width="280" height="250"></canvas>
      </div>
      <div class="wheel">
        <button class="left-btn" onclick="prevStation()">⏮</button>
        <button class="right-btn" onclick="nextStation()">⏭</button>
        <button class="center-button" onclick="togglePower()" id="powerBtn">
          <svg viewBox="0 0 24 24">
            <path d="M12 2V12" />
            <path d="M5.5 7A9 9 0 1 0 18.5 7" />
          </svg>
        </button>
      </div>
      <audio id="player" preload="none" crossorigin="anonymous"></audio>
    </div>
  </div>

  <script>
    // Splash transition
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("splash").style.display = "none";
        const app = document.getElementById("mainApp");
app.style.display = "flex";
setTimeout(() => app.classList.add("visible"), 10); // Fade in
      }, 4000);
    });

    const stations = [
      { name: "Ashraya FM ", freq: "90.0", url: "https://fm.ashrayafm90.com/ashrayafm" },
      { name: "Radio Lemon", freq: "90.2", url: "https://schedule.radiolemonlive.com:7443/listen/radio_lemon_live_bangalore/live" },
      { name: "Ahalia FM ", freq: "90.4", url: "https://cast1.my-control-panel.com/proxy/ahaliafm/stream" },
      { name: "Media Village", freq: "90.8", url: "https://443-1.autopo.st/183/stream" },
      { name: "Diverse FM Hindi", freq: "90.9", url: "https://carol.epichosts.co.uk:8570/live.mp3" },
      { name: "Tamil FM Dubai", freq: "91.1", url: "https://centova.aarenworld.com/proxy/894tamilfm/stream" }, 
      { name: "Radio Suno Qatar", freq: "91.7", url: "https://playerservices.streamtheworld.com/api/livestream-redirect/SUNO917_SC" },
      { name: "Vaanam Radio", freq: "92.3", url: "https://sathees.radioca.st/;stream.mp3" },
      { name: "Vanavil FM ", freq: "93.9", url: "https://s7.yesstreaming.net:8062/stream" },
      { name: "Isaiaruvi FM", freq: "94.0", url: "https://stream.zeno.fm/9et0ahdef0hvv" },
      { name: "Radio Asia", freq: "94.7", url: "https://ice31.securenetsystems.net/RADIOKERAL" },
      { name: "Red FM Mumbai", freq: "95.0", url: "https://funasia.streamguys1.com/live9" },
      { name: "Radio Mirchi", freq: "98.3", url: "https://playerservices.streamtheworld.com/api/livestream-redirect/NJS_HIN_ESTAAC.m3u8" },
      { name: "Adithya FM", freq: "99.9", url: "https://cdn.jsdelivr.net/gh/shoy77/mp3/Mouname.mp3" },
      { name: "ARR Radio", freq: "100.0", url: "https://s7.yesstreaming.net:8038/stream" },
      { name: "Kochi FM",  freq: "102.3", url: "https://air.pc.cdn.bitgravity.com/air/live/pbaudio045/playlist.m3u8" },
      { name: "Vividh Bharati", freq: "102.8", url: "https://air.pc.cdn.bitgravity.com/air/live/pbaudio001/playlist.m3u8" },
      { name: "AIR Alappuzha", freq: "102.9", url: "https://air.pc.cdn.bitgravity.com/air/live/pbaudio230/playlist.m3u8" },
      { name: "AIR Kozhikode",  freq: "103.6", url: "https://air.pc.cdn.bitgravity.com/air/live/pbaudio083/playlist.m3u8" },
      { name: "Kiss FM", freq: "105.5", url: "https://rogers-hls.leanstream.co/rogers/tor925.stream/icy" },
      { name: "90s Euro Dance", freq: "105.6", url: "https://regiocast.streamabc.net/regc-90s90seurodance7558633-mp3-192-3419489" },
      { name: "90s Club Hits", freq: "105.7", url: "https://regiocast.streamabc.net/regc-90s90smain4920117-mp3-192-6232809" },
      { name: "Diverse FM Eng", freq: "106.0", url: "https://icecast.mediaice.co.uk/DiverseMP3" },
      { name: "Christian Radio", freq: "107.1", url: "https://s2.radio.co/sf61790a26/listen" },
      { name: "Bafa Radio", freq: "107.2", url: "https://gains.reviveradio.net/proxy/bafaradio/stream" },
      { name: "Luminous Radio", freq: "107.3", url: "https://patmos.cdnstream.com/proxy/luminous/?mp=/stream" },
      { name: "Jesus Radio", freq: "107.4", url: " https://gains.reviveradio.net/proxy/jesusreigns?mp=/stream" },
      { name: "Psalms Radio", freq: "107.5", url: "https://s2.citrus3.com:8046/stream" },
      { name: "Radio Maria", freq: "107.6", url: "https://dreamsiteradiocp2.com/proxy/rmindia1?mp=/stream" },
      { name: "DVN Radio", freq: "107.", url: "https://ice31.securenetsystems.net/DVN" },
      { name: "RAFA Radio", freq: "107.", url: "https://gains.reviveradio.net/proxy/rafaradio?mp=/stream" }
      
    ];

    let current = 0;
    let isOn = false;

    const player = document.getElementById("player");
    const freqDisplay = document.getElementById("frequency");
    const nameDisplay = document.getElementById("stationName");
    const indicator = document.getElementById("indicator");
    const powerBtn = document.getElementById("powerBtn");

    function loadStation(index) {
      const station = stations[index];
      player.src = station.url;
      freqDisplay.textContent = `${station.freq} MHz`;
      nameDisplay.textContent = station.name;
      player.play().catch(err => console.error("Autoplay error:", err));
    }

    function nextStation() {
      if (!isOn) return;
      current = (current + 1) % stations.length;
      loadStation(current);
    }

    function prevStation() {
      if (!isOn) return;
      current = (current - 1 + stations.length) % stations.length;
      loadStation(current);
    }

    function togglePower() {
      isOn = !isOn;
      if (isOn) {
        indicator.classList.add("on");
        powerBtn.classList.add("on");
        if (audioContext.state === 'suspended') {
          audioContext.resume();
        }
        loadStation(current);
        drawVisualizer();
      } else {
        indicator.classList.remove("on");
        powerBtn.classList.remove("on");
        player.pause();
        freqDisplay.textContent = "Live Radio";
        nameDisplay.textContent = "by Shoy Viswanathan";
      }
    }

    const canvas = document.getElementById("visualizer");
    const ctx = canvas.getContext("2d");

    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const analyser = audioContext.createAnalyser();
    const source = audioContext.createMediaElementSource(player);
    source.connect(analyser);
    analyser.connect(audioContext.destination);
    analyser.fftSize = 64;

    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function drawVisualizer() {
      requestAnimationFrame(drawVisualizer);
      analyser.getByteFrequencyData(dataArray);

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const barWidth = canvas.width / bufferLength;
      let x = 0;

      for (let i = 0; i < bufferLength; i++) {
        const barHeight = dataArray[i];
        const hue = (i / bufferLength) * 360;
        ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
        ctx.fillRect(x, canvas.height - barHeight, barWidth - 1, barHeight);
        x += barWidth;
      }
    }
  </script>
</body>
</html>
